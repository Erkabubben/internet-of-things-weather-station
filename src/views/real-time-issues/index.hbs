<h1 class="center-header">READINGS</h1>

<p id="temp">Temperature: </p>
<p id="hum">Humidity: </p>

<canvas id="lastReadingsTemperatureChart" width="100%" height="32px"></canvas>
<canvas id="lastReadingsHumidityChart" width="100%" height="32px"></canvas>
<script type="module" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<script type="module">
    const ctx0 = document.getElementById('lastReadingsTemperatureChart').getContext('2d');
    window.lastReadingsTemperatureChart = new Chart(ctx0, {
        type: 'line',
        data: {
            labels: [1, 2, 3, 4, 5],
            datasets: [{
                label: 'Temperature (Celsius)',
                data: [1, 2, 3, 4, 5],
                fill: false,
                borderColor: 
                    'rgba(117, 20, 20, 1)',
                borderWidth: 2
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            },
            legend: {
                display: false
            },
        }
    })

    const ctx1 = document.getElementById('lastReadingsHumidityChart').getContext('2d');
    window.lastReadingsHumidityChart = new Chart(ctx1, {
        type: 'line',
        data: {
            labels: [1, 2, 3, 4, 5],
            datasets: [{
                label: 'Humidity',
                data: [1, 2, 3, 4, 5],
                fill: false,
                borderColor: 
                    'rgba(92, 122, 159, 1)',
                borderWidth: 2
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            },
            legend: {
                display: false
            },
        }
    })

    window.updateLastReadingsCharts = function (lastReadings) {
        window.lastReadingsTemperatureChart.data.labels = lastReadings.timestamps
        window.lastReadingsHumidityChart.data.labels = lastReadings.timestamps
        window.lastReadingsTemperatureChart.data.datasets[0].data = lastReadings.temperature
        window.lastReadingsHumidityChart.data.datasets[0].data = lastReadings.humidity
        window.lastReadingsTemperatureChart.update()
        window.lastReadingsHumidityChart.update()
    }
</script>
